{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["const date_page = document.querySelector('.date_page');\n\nconst url = \"http://192.168.1.117:9000/\"; \n// const url = \"http://georoute.asuscomm.com:5555/\"; \nconst status_EP = \"get_status\";\nconst mode_EP = \"get_mode\";\nconst warnings_EP = \"get_warnings\"; \n\nconst modeUrl = `${url}${mode_EP}`;\nconst statusUrl = `${url}${status_EP}`;\nconst warningsUrl = `${url}${warnings_EP}`;\nlet view_mode =\"\";\nlet view_status=\"\";\n\nmode();\nstatusEP();\n// console.log(view_mode);\n// console.log(view_status);\ndate_page.innerHTML = view_mode + view_status;\n\nconst setUserTimerId = setInterval(() => {\n  mode();\n  statusEP();\n//   console.log(view_mode);\n// console.log(view_status);\n  // date_page.innerHTML = view_mode + view_status\n}, 10000);\n\n  function mode() {\n    fetch(modeUrl)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        return response.json();\n      })\n      .then(data => {\n        view_mode = markup_mode(data);\n        // date_page.innerHTML = markup_mode(data);\n      })\n      .catch(error => {\n        console.error('Fetch error:', error);\n      });\n  };\n\n  function statusEP() {\n    fetch(statusUrl)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        return response.json();\n      })\n      .then(data => {\n          view_status = markup_status(data);\n        // date_page.insertAdjacentHTML(\"beforeend\", markup_status(data))\n        date_page.innerHTML = markup_mode(data) + markup_status(data);\n      })\n      .catch(error => {\n        console.error('Fetch error:', error);\n      });\n  };\n  \n\nfunction markup_mode (data) {\n  if (data[\"mode\"]===\"Line Mode\") {\n  return (`<div class=\"mode_EP\">\n     <p class=\"param_title net main\">Живлення від мережі </p> </div>`)}\n  else { return (`<div class=\"mode_EP\"><p class=\"param_title bat main\">Живлення від батарей</p></div>`)};\n};\n\nfunction markup_status (data) {\n  return (`<div class=\"all_param\">\n     <ul class=\"param_box\">\n     <li class=\"param_item\">\n     <p class=\"param_title\">Вхідна напруга, В</p>\n     <p class=\"param_data\">${data['ac_grid_voltage']}</p> \n     </li>\n\n     <li class=\"param_item\">\n     <p class=\"param_title\">Вхідна частота, Hz</p>\n     <p class=\"param_data\">${data['ac_grid_frequency']}</p> \n     </li>\n \n     <li class=\"param_item\">\n     <p class=\"param_title\">Ємність батарей, %</p>\n     <p class=\"param_data\">${data['battery_capacity']}</p> \n     </li>\n\n     <li class=\"param_item\">\n     <p class=\"param_title\">Струм заряду батарей, А</p>\n     <p class=\"param_data\">${data['battery_charging_current']}</p> \n     </li>\n\n     <li class=\"param_item\">\n     <p class=\"param_title\">Струм розряду батарей, А</p>\n     <p class=\"param_data\">${data['battery_discharge_current']}</p> \n     </li>\n\n     <li class=\"param_item\">\n     <p class=\"param_title\">Вольтаж батарей, В</p>\n     <p class=\"param_data\">${data['battery_voltage']}</p> \n     </li>\n\n     <li class=\"param_item\">\n     <p class=\"param_title\">Температура інвертору, град.С</p>\n     <p class=\"param_data\">${data['inverter_heat_sink_temperature']}</p> \n     </li>\n     </ul>\n     \n\n     <ul class=\"param_box\">\n     <li class=\"param_item\">\n     <p class=\"param_title\">Вихідна напруга, В </p>\n     <p class=\"param_data\">${data['ac_output_voltage']} </p> \n     </li>\n\n    <li class=\"param_item\">\n     <p class=\"param_title\">Вихідна частота, Hz</p>\n     <p class=\"param_data\">${data['ac_output_frequency']} </p> \n     </li>\n \n    <li class=\"param_item\">\n     <p class=\"param_title\"> Навантаження інвертору, %</p>\n     <p class=\"param_data\"> ${data['ac_output_load_percent']} </p> \n     </li>\n    <li class=\"param_item\">\n     <p class=\"param_title\">Споживана від інвертору потужність, Вт</p>\n     <p class=\"param_data\">${data['ac_output_active_power']}</p> \n     </li>\n    <li class=\"param_item\">\n     <p class=\"param_title\">Споживана від інвертору потужність, ВА</p>\n     <p class=\"param_data\">${data['ac_output_apparent_power']}</p> \n     </li>\n     <li class=\"param_item\">\n     <p class=\"param_title\"> Чи заряджаються батареї?</p>\n     <p class=\"param_data\"> ${data['is_ac_charging_on']}</p> \n     </li>\n     </ul>\n     </div>\n     `)\n};"],"names":["date_page","url","status_EP","mode_EP","modeUrl","statusUrl","view_mode","view_status","mode","statusEP","response","data","markup_mode","error","markup_status"],"mappings":"ssBAAA,MAAMA,EAAY,SAAS,cAAc,YAAY,EAE/CC,EAAM,6BAENC,EAAY,aACZC,EAAU,WAGVC,EAAU,GAAGH,CAAG,GAAGE,CAAO,GAC1BE,EAAY,GAAGJ,CAAG,GAAGC,CAAS,GAEpC,IAAII,EAAW,GACXC,EAAY,GAEhBC,IACAC,IAGAT,EAAU,UAAYM,EAAYC,EAEX,YAAY,IAAM,CACvCC,IACAC,GAIF,EAAG,GAAK,EAEN,SAASD,GAAO,CACd,MAAMJ,CAAO,EACV,KAAKM,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,6BAA6B,EAE/C,OAAOA,EAAS,MACxB,CAAO,EACA,KAAKC,GAAQ,CACZL,EAAYM,EAAYD,CAAI,CAEpC,CAAO,EACA,MAAME,GAAS,CACd,QAAQ,MAAM,eAAgBA,CAAK,CAC3C,CAAO,CAEP,CACE,SAASJ,GAAW,CAClB,MAAMJ,CAAS,EACZ,KAAKK,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,6BAA6B,EAE/C,OAAOA,EAAS,MACxB,CAAO,EACA,KAAKC,GAAQ,CACVJ,EAAcO,EAAcH,CAAI,EAElCX,EAAU,UAAYY,EAAYD,CAAI,EAAIG,EAAcH,CAAI,CACpE,CAAO,EACA,MAAME,GAAS,CACd,QAAQ,MAAM,eAAgBA,CAAK,CAC3C,CAAO,CAEP,CAEA,SAASD,EAAaD,EAAM,CAC1B,OAAIA,EAAK,OAAU,YACX;AAAA,sEAEO,qFACjB,CAEA,SAASG,EAAeH,EAAM,CAC5B,MAAQ;AAAA;AAAA;AAAA;AAAA,6BAImBA,EAAK,eAAkB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKvBA,EAAK,iBAAoB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKzBA,EAAK,gBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKxBA,EAAK,wBAA2B;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKhCA,EAAK,yBAA4B;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKjCA,EAAK,eAAkB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKvBA,EAAK,8BAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAQtCA,EAAK,iBAAoB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKzBA,EAAK,mBAAsB;AAAA;AAAA;AAAA;AAAA;AAAA,8BAK1BA,EAAK,sBAAyB;AAAA;AAAA;AAAA;AAAA,6BAI/BA,EAAK,sBAAyB;AAAA;AAAA;AAAA;AAAA,6BAI9BA,EAAK,wBAA2B;AAAA;AAAA;AAAA;AAAA,8BAI/BA,EAAK,iBAAoB;AAAA;AAAA;AAAA;AAAA,MAKvD"}